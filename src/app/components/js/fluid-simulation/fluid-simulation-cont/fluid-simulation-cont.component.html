<div class="note-title-wrapper-header">
  <i aria-hidden="true" class="fa fa-chevron-left"></i>
  <p><span routerLink="/home">Notes</span> / JS / Fluid Simulation</p>
</div>
<div class="container">
  <div class="note-content">
    <div class="banner">
      <img alt="Wave Simulation" src="assets/images/js/wave.png">
    </div>
    <div class="section" id="Unveiling Fluid Simulation:..">
      <h1>
        Unveiling Fluid Simulation: A Deep Dive into Smoothed Particle Hydrodynamics (SPH) with JavaScript</h1>
      <p class="note-tags"><span><strong>Tended:</strong> Dec 2023</span> <span><strong>Status:</strong> Advanced</span>
      </p>
    </div>

    <div class="section" id="Introduction:">
      <h2>Introduction to Fluid Simulation</h2>
      <p>Fluid simulation is a captivating realm of computational physics that enables us to replicate the dynamic
        behavior of liquids and gases in a virtual environment. Whether it's rendering realistic water effects in video
        games or simulating airflow over aerofoils, understanding fluid dynamics is fundamental. In this comprehensive
        guide, we'll delve into the intricate physics behind fluid simulation, explore the Smoothed Particle
        Hydrodynamics (SPH) method, and unravel the JavaScript code snippet to simulate fluid behavior.</p>
    </div>

    <div class="section" id="1. Unraveling Fluid Physics">
      <h2>Unraveling Fluid Physics</h2>
    </div>

    <div class="section" id="‎ ‎ ➥ What is a Fluid?">
      <h3>What is a Fluid?</h3>
      <p>A fluid can exist in two forms: liquid or gas. Both share similar physical structures and can be simulated
        using analogous methods. In the realm of fluid simulation, we often encounter terms like Eulerian and
        Lagrangian, named after the pioneering mathematicians Leonhard Euler and Joseph-Louis Lagrange.</p>
      <ul>
        <li><strong>Eulerian Method: </strong>This grid-based approach, attributed to Euler, involves dividing the fluid
          domain into a grid and analyzing properties at fixed points.
        </li>
        <li><strong>Lagrangian Method: </strong>Named after Lagrange, this grid-free approach represents the fluid as
          particles, allowing them to move freely within the simulation.
        </li>
      </ul>
    </div>

    <div class="section" id="‎ ‎ ➥ Essential Physics..">
      <h3>Essential Physics Concepts</h3>
      <p>Incompressible Fluids</p>
      <p>Fluids that experience negligible changes in volume under pressure are termed incompressible. Water is a
        classic example, and this assumption simplifies fluid simulation. In the code snippet, an incompressible fluid
        is emulated, and the concept of compression is illustrated.</p>
      <p>Inviscid Fluids</p>
      <p>Inviscid fluids are those with zero viscosity, implying no internal friction. While a good approximation for
        gases and water, this assumption simplifies simulation. The code snippet reflects this by assuming zero
        viscosity in the fluid dynamics equations.</p>
    </div>

    <div class="section" id="‎ ‎ ➥ Fluid Simulation:">
      <h3>Fluid Simulation: From 2D to 3D</h3>
      <p>Extending fluid simulation from two to three dimensions is straightforward in principle but is left as an
        exercise for the reader.</p>
    </div>

    <div class="section" id="‎ ‎ ➥ Navier-Stokes..">
      <h3>Navier-Stokes Equations</h3>
      <p>At the core of fluid dynamics are the Navier-Stokes equations, a set of partial differential equations
        describing the motion of fluid substances. These equations incorporate principles of mass conservation and the
        laws of motion.</p>
    </div>

    <div class="section" id="2. Smoothed Particle Hydrodynamics..">
      <h2>Smoothed Particle Hydrodynamics (SPH)</h2>
    </div>

    <div class="section" id="‎ ‎ ➥ Introduction to SPH">
      <h3>Introduction to SPH</h3>
      <p>Smoothed Particle Hydrodynamics (SPH) is a meshless particle method used for fluid simulation. Unlike
        grid-based approaches, SPH represents the fluid as discrete particles, each possessing properties like velocity,
        density, and pressure. The key idea is to compute fluid behavior by interpolating values from neighboring
        particles.</p>
    </div>

    <div class="section" id="‎ ‎ ➥ Fluid as a Velocity..">
      <h3>Fluid as a Velocity Field on a Grid</h3>
      <p>The code snippet models the fluid as a velocity field on a grid. The velocity, represented as a 2D vector, is
        computed for each grid cell using collocated or staggered grid arrangements.</p>
    </div>

    <div class="section" id="‎ ‎ ➥ Fluid Simulation Steps">
      <h3>Fluid Simulation Steps</h3>
      <ol>
        <li><strong>Modify Velocity Values: </strong>Adjust velocity values, e.g., adding gravity to simulate external
          forces.
        </li>
        <li><strong>Move the Velocity Field (Advection): </strong>Displace the velocity field based on its own values,
          simulating the movement of fluid particles.
        </li>
        <li><strong>Make the Fluid Incompressible (Projection): </strong>Ensure incompressibility by solving for
          pressure and updating velocity accordingly.
        </li>
      </ol>
    </div>

    <div class="section" id="‎ ‎ ➥ Divergence and..">
      <h3>Divergence and Incompressibility</h3>
      <p>Divergence, representing the total outflow of a fluid, is crucial for enforcing incompressibility. The code
        snippet employs a technique to calculate and adjust velocity values, maintaining incompressibility.</p>
    </div>

    <div class="section" id="‎ ‎ ➥ Handling Obstacles..">
      <h3>Handling Obstacles and Walls</h3>
      <p>The simulation allows for the introduction of obstacles or walls. By adjusting velocity values around
        obstacles, the fluid's behavior is influenced, mimicking real-world scenarios.</p>
    </div>

    <div class="section" id="‎ ‎ ➥ Solving the Grid:">
      <h3>Solving the Grid: Gauss-Seidel Method</h3>
      <p>The grid is iteratively solved using the Gauss-Seidel method, a simple but effective numerical technique. The
        method converges towards a solution, and in the context of fluid simulation, it helps compute pressure
        values.</p>
    </div>

    <div class="section" id="‎ ‎ ➥ Measuring Pressure.."></div>

    <div class="section" id="3. Advection: Moving Fluid..">
      <h2>Converting from Canvas to String Coordinates:</h2>
      <p ngNonBindable>
        Since the string goes between 0 and 1 in "String Coordinates" \( (x_s, y_s) \), we can scale to the window
        "canvas coordinates" \( (x_c, y_c) \) as follows:
        \[
        x_c = C_w \cdot x_s
        \]
        \[
        y_c = C_w \cdot y_s + \frac {{C_h}} {{2}}
        \]
        where \( C_w \) and \( C_h \) are the width and height of the canvas in pixels.
      </p>
    </div>

    <div class="section" id="‎ ‎ ➥ Smoke Advection and.."></div>

    <div class="section" id="4. JavaScript Implementation:">
      <h2>JavaScript Implementation:</h2>
      <p>Now, let's translate these mathematical concepts into JavaScript code:</p>
      <div class="code-snippet">
        <div class="code-snippet-header">
          <div class="console">
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="language">
            Javascript
          </div>
        </div>
        <div class="code-snippet-wrapper">
          <iframe #iframe type="text/javascript"></iframe>
        </div>
      </div>
    </div>

    <div class="section" id="Conclusion:">
      <h2>Conclusion:</h2>
      <p>Simulating damped waves with JavaScript allows for the exploration of intricate physical phenomena in a visual
        and interactive manner. By understanding the true wave equation and translating it into code, we can gain
        insights into the behavior of waves on a string. Experimentation and further customization of the code can lead
        to a deeper understanding and appreciation of wave dynamics.</p>
    </div>

    <div class="section" id="Reference:">
      <h2>Reference:</h2>
      <ul>
        <li><a href="https://en.wikipedia.org/wiki/Wave_equation">Wikipedia: Wave Equation</a></li>
        <li><a
          href="https://github.com/lukepolson/youtube_channel/tree/main/Javascript%20Simulations/js1">lukepolson</a>
        </li>
        <li><a href="https://github.com/kavicastelo/JS_Simulations/tree/wave_simulation">kavi castelo</a></li>
      </ul>
    </div>
  </div>

</div>
